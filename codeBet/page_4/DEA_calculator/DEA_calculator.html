<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="../../ico/ico1.jpg">
    <title>CAU</title>
    <style>
        *{
            padding: 0;
            margin: 0;
            background-color: black;    
        }
        body {
            padding: 0;
            margin: 0;
            overflow: hidden;
        }


        .panl{
            position: fixed;
            width: 20vw;
            min-height: 100vh;
            overflow: hidden;
        }
        .panl .normalDetails{
            transition: 0.4s ease-in-out;
        }
        .panl .normalDetails summary{
            width: 100%;
            height: 5vh;
            text-align: center;
            line-height: 5vh;
            color: white;
        }
        .panl .normalDetails textarea{
            border-radius: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.068);
            color: white;
            outline: none;
            border: none;
            padding: 10px;
            box-sizing: border-box;
            resize: none;
            font-family: 'Courier New', Courier, monospace;
        }
                
        details .container {
            height: 0;
            transition: 0.5s;
        }
        details[open] .container {
            height: 30vh;
        }

        #btnContainer{
            overflow-y: scroll;
        }
        #btnContainer::-webkit-scrollbar{
            display: none;
        }

        .normalButton{
            width: 100%;
            box-sizing: border-box;
            margin: 8px 0;
            border-radius: 0;
            padding: 3px;
            border: none;
            outline: none;
            background-color: rgba(255, 255, 255, 0.068);
            color: white;
            letter-spacing: 2px;
            cursor: pointer;
            transition: 0.2s ease-in-out;
        }
        .normalButton:hover{
            color: yellow;

        }

        main{
            position: fixed;
            left: 20vw;
            top: 0;
        }

    </style>
    <script src="../../../p5.min.js"></script>
    <script src="functions.js"></script>
    <script>

        function displayFunction(name){
            for(var i=0;i<functions.length;i++){
                if(functions[i].name==name){
                    document.querySelector(".inputFunction").value=functions[i].ifunction;
                    document.querySelector(".displayMode").value=functions[i].cfunction;
                    break;
                }
            }
        }

        function loadFunction(){
            for(var i=0;i<functions.length;i++){
                let objTemp=(functions[i]);
                console.log(functions[i]);
                document.querySelector("#btnContainer").innerHTML+=`
                <button class="normalButton" onclick="displayFunction(this.innerHTML);">${objTemp.name}</button>
                `
            }
        }


        function setup() {
            createCanvas(windowWidth*0.8, windowHeight);
            smooth();
            loadFunction();
        }

        function windowResized() {
            resizeCanvas(windowWidth*0.8,windowHeight);
        }

        function draw() {
            translate(width/2,height/2);
            background(0);
            rectMode=CENTER;
            noStroke();
            let zFunction=document.querySelector(".inputFunction").value;
            let cFunction=document.querySelector(".displayMode").value;
            try{
                for(var x=-300;x<300;x+=10){
                    for(var y=-300;y<300;y+=10){
                        var z=eval(zFunction);
                        eval(cFunction);
                    }
                }
            }catch{
                fill(255);
                text("error",0,0);
            }
        }   
    </script>
    </head>

    <body>
    <div class="panl">
        <details class="normalDetails" open>
            <summary>
                inputFunction
            </summary>
            <div class="container">
            <textarea class="inputFunction" spellcheck="false">
sin(x*y*3+frameCount/20);
            </textarea>        
            </div>
        </details>
        <details class="normalDetails" open>
            <summary>
                inputColorMode
            </summary>
            <div class="container">
            <textarea class="displayMode" spellcheck="false">
noFill();
stroke(255,x,y);
strokeWeight(z);
circle(x,y,z*10);
            </textarea>   
            </div>     
        </details>
        <details class="normalDetails" open>
            <summary>
                examplesList
            </summary>
            <div class="container" id="btnContainer">

            </div>
        </details>

    </div>
    <main>
        
    </main>
    </body>
</html>